
<html>
<head>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Roboto:400,700" rel="stylesheet">
<link href="style.css" rel="stylesheet" type="text/css">
<title>Classificador de filmes</title>
<meta charset="utf-8">
</head>
<body>
   <header>
     <h2 style="text-align:center;">Classificador de filmes (ELO)</h2>
   </header>
   <br>
   <br>
   <p style="text-align:center;font-size:30px;">
      Quais são seus filmes favoritos?
   </p>
   <br>
   <p style="text-align:center;font-size:16px;">
     Escreva abaixo os títulos dos filmes que você deseja classificar.
     <br>
     Separe os títulos uns dos outros, digitando um título por linha.  
   </p>
   <br>
   <br>
   <textarea type="text" id="textbox" style="text-align:center;display: block" placeholder="Filme 1
                                                                                Filme 2
                                                                                " id="lista_filmes"></textarea>
   <br>
   <br>
  <button class="button" id="botao_filme_1" onclick="votar_filme_1()" style="background-color: #3300FF;display: none">Filme 1</button>
  <br>
  <button class="button" id="botao_filme_2" onclick="votar_filme_1()" style="background-color: #32CD32;display: none">Filme 2</button>
  <br>
  <button class="button" id="botao_voltar" onclick="voltar()" style="background-color: #FF6347;display: none">Voltar</button>
  <br>
  <button class="button" id="botao_ler" onclick="ler_filmes()" style="background-color: #3300FF;display: block">Classificar filmes!</button>
  <br>
  <br>
   <p style="text-align:center;font-size:16px; bottom: 0;">
      Implementado por Alexandre Willik Neto.
   </p>
  <script>
     
  class Filme
  {
     constructor(index, title, elo_rating)
     {
        this.index = index;
        this.title = title;
        this.elo_rating = elo_rating;
     }
  }
  
  function get_expected_rating(A, B)
  {
     return (1 / (1 + 10 ** ((B - A) / 400)))
  }
     
  function update_rating(result,A,B,K)
  {
    if (result === "win")
    {
        return (A + K * (1 - get_expected_rating(A, B)))
    }
    if (result === "lose")
    {
        return (A + K * (0 - get_expected_rating(A, B)))
    }
    if (result === "tie")
    {
        return (A + K * (0.5 - get_expected_rating(A, B)))
    }
  }

     
  function ler_filmes()
  {
     const ele = document.getElementsByTagName('textarea');
     if (ele.value === '') 
     {
           alert ('Escreva um título de um filme antes usar o classificador.');
           ele[i].focus();
           return false;
     }
     toggleText("textbox");
     toggleText("botao_filme_1");
     toggleText("botao_filme_2");
     toggleText("botao_ler");
     toggleText("botao_voltar");
     
     var textArea = document.getElementById("textbox");
     var vetorDeTitulos = textArea.value.split("\n"); 
     
     var N = vetorDeTitulos.length;
     var vetorDeFilmes = [];
     for (let i = 0; i<=N -1; i++)
     {
        vetorDeFilmes.push(new Filme(i+1,vetorDeTitulos[i],1000))
     }
     
     
     for (let i = 0; i<=N -1; i++)
     {
        alert (vetorDeTitulos[i]);
     }
     
     var K = 32; /*reajuste máximo por jogo*/
     var index_vencedor = -1;
     var rept = 0;
     
  }
  function voltar()
  {
     toggleText("textbox");
     toggleText("botao_filme_1");
     toggleText("botao_filme_2");
     toggleText("botao_ler");
     toggleText("botao_voltar");
  }
  function toggleText(id) {
     var text = document.getElementById(id);
     if (text.style.display === "none") {
       text.style.display = "block";
     } else {
       text.style.display = "none";
     }
  }
  </script>
</body>
  
 

</html>
